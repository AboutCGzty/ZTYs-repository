# 概述

## 一、初识 Unity Shader

### 1.1、什么是 Shader



### 1.2、Shader 与材质的关系

### 1.3、Shader 的几种形式

#### 1.3.1、Fixed Function Shader

#### 1.3.2、Surface Shader

#### 1.3.3、Vertex/Fragment Shader

### 1.4、Unity 中的 ShaderLab

#### 1.4.1、什么是 ShaderLab

#### 1.4.2、Unity 自带的 ShaderLab 模板

- Standard Surface Shader
- Unlit Shader
- Image Effect Shader
- Compute Shader
- Ray Tracing Shader

### 1.5、如何编写 Shader

#### 1.5.1、代码编辑器

指按照约定俗成的编码规范，在某些代码编程软件中编写 Shader 代码，如下图所示：

<img src="00、概述.assets/image.png" alt="image" style="zoom:50%;" />

使用代码编写 Shader 具有以下优缺点：

（1）优点：功能全面且自由灵活，性能可控。

（2）缺点：上手难度高且学习曲线陡，做效果验证时调试效率低。

编写 Shader 代码的三种语言：

- C for Graphic（Cg）

> 为“GPU 编程”设计的高级绘制语言，由“NVIDIA”与“Microsoft”合作开发。

极力保留“C 语言”的大部分语义，并让开发者从硬件细节中解脱出来。同时也有，如：代码的易重用性、高可读性，编译器代码优化等好处。

主要参照“ANSI C”建模，但也从“C++”与“Java”以及早期的绘制语言如“RenderMan and the Stanford shading language”中吸取了一些思想。同时考虑了“GPU”的体系结构，如：可编程多处理器单元（顶点处理器、像素处理器、外加不可编程单元）。这些部分和应用都是通过数据流连接起来，允许分别为“顶点”与“像素”编写程序。

“Cg”的“API”引入了“Profiles”的概念以处理顶点和像素编程所缺乏的通用性。一个“Cg Profile”就定义了一套整个“Cg 语言”的子集以适应不同的硬件平台与“API”。可以根据运行时的需要或者事先编译成“GPU 汇编”代码。这样能够很容易地将像素程序与手写的顶点程序结合起来，或者甚至采用不可编程的“OpenGL”与“DirectX”顶点流水线，反之亦然。

------

- High-Level Shading Language（HLSL）

> 由“Microsoft”拥有及开发的一种着色器语言，是“GLSL”的先辈，与“Cg”非常相似。

最初的开发是为了辅助“Direct3D 9”的着色器汇编语言，后成为“Direct3D 10”以来统一着色器模型所必须的语言。只能供微软的“Direct3D”以及“XNA”使用，同时不能与“OpenGL”标准兼容。

主要作用是将一些复杂的图像处理，快速而又有效率地在“显卡（GPU）”上完成。同时，与组合式或低阶着色语言相比能降低在编写复杂特殊效果时所发生编程错误的机率。

------

- OpenGL Shading Language（GLSL）

> 由“OpenGL Architecture Review Board（OpenGL ARB）”开发，以“C 语言”为基础的高级着色器语言。为开发者提供了对渲染管线更多的直接控制，而无需使用汇编语言或硬件规格语言的功能。

在“OpenGL”中进行着色编程的语言，即开发人员编写的短小的自定义程序，是在“GPU”上执行的。代替了固定渲染管线的一部分，使其不同层次具有可编程性。比如：视图转换、投影转换等。

代码通常分为“Vertex Shader”与“Fragment Shader”两个部分，有时还会有“Geometry Shader”。

#### 1.5.2、图形编辑器

指在可视化的图形画布中，使用封装好的代码功能节点以连线的方式进行 Shader 编写，如下图所示：

<img src="00、概述.assets/2.png" alt="2" style="zoom: 67%;" />

使用代码编写 Shader 具有以下优缺点：

（1）优点：不需要编写代码，对美术同学很友好且做效果验证时调试效率极高。

（2）缺点：功能被编辑器本身所限制。编辑器没提供的功能，不会写代码的话就无法使用。

## 二、编程环境

### 2.1、什么是 IDE

“集成开发环境（Intergrated Development Environment，简称IDE）”，指用于提供程序开发环境的应用程序。一般包括代码编辑器、编译器、调试器与图形用户界面的工具。

### 2.2、代码编辑器

以下是一些常用的 IDE 搭配推荐：

**（1）Visual Studio 2022 + ShaderlabVS Pro：**

​	[下载 Visual Studio Tools - 免费安装 Windows、Mac、Linux (microsoft.com)](https://visualstudio.microsoft.com/zh-hans/downloads/)

​	https://assetstore.unity.com/packages/tools/utilities/shaderlabvs-pro-186176

**（2）Visual Studio Code + ShaderlabVSCode：**

​	[Visual Studio Code - Code Editing. Redefined](https://code.visualstudio.com/)

​	[ShaderlabVSCode | 实用工具 工具 | Unity Asset Store](https://assetstore.unity.com/packages/tools/utilities/shaderlabvscode-94653)

**（3）JetBrains Rider：**

​	[Rider: The Cross-Platform .NET IDE from JetBrains](https://www.jetbrains.com/rider/)

**（4）Sublime Text：**

​	[Sublime Text - Text Editing, Done Right](https://www.sublimetext.com/)

​	[noct/sublime-shaders: GLSL/HLSL/Cg syntax highlighting for Sublime Text 2 & 3 (github.com)](https://github.com/noct/sublime-shaders)

### 2.3、可视化图形编辑器

#### 2.3.1、Amplify Shader Editor

由第三方个人团队“Amplify Creations”制作的 Shader 图形编辑器，因其功能健壮且丰富，所以强烈推荐学习使用。

下载地址：[Amplify Shader Editor | 可视化脚本 | Unity Asset Store](https://assetstore.unity.com/packages/tools/visual-scripting/amplify-shader-editor-68570)

#### 2.3.2、Shader Graph

由“Unity”官方制作与维护更新，URP 默认包含。虽然不如“Amplify Shader Editor”好用，但毕竟官方在迭代，所以也推荐学习与使用。

官方手册地址：https://docs.unity3d.com/cn/2021.2/Manual/shader-graph.html

#### 2.3.3、Shader Forge

比较早期的 Shader 图形编辑器，不过早已不更新且只支持内置管线，建议弃用。

官方地址：[Shader Forge (acegikmo.com)](https://acegikmo.com/shaderforge/)

